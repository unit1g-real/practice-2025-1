<!DOCTYPE html>
<html lang="en">
    <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
        <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="ie=edge">

<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="author" content="">
<meta name="description" content="“Создание игры «Spaxe invaders»” на c&#43;&#43; с нуля” Установка необходиимых билиотек
установка библиротек GLFW установка библиротек GLEW Начало работы
Подключение установленных библиотек #include #include &lt;GLFW/glfw3.h&gt;
Написание функций для вывода ошибок GLFW typedef void(*GLFWerrorfun)(int, const char *)
void error_callback(int error, const char* description)
{ fprintf(stderr, &ldquo;Error: %s\n&rdquo;, description); }
glfwSetErrorCallback(error_callback);
window = glfwCreateWindow(640, 480, &ldquo;Space Invaders&rdquo;, NULL, NULL);
if(!window)
{ glfwTerminate();
return -1;}
glfwMakeContextCurrent(window);
Инициализация GLEW GLenum err = glewInit();
" />
<meta name="keywords" content="homepage, blog" />
<meta name="robots" content="noodp" />
<meta name="theme-color" content="" />
<link rel="canonical" href="http://localhost:1313/%D1%82%D1%85/%D1%82%D0%B5%D1%85%D0%BD%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B5_%D1%80%D1%83%D0%BA%D0%BE%D0%B2%D0%BE%D0%B4%D1%81%D1%82%D0%B2%D0%BE/" />


    <title>
        
            техническое руководство :: Практика  — A simple theme for Hugo
        
    </title>





  <link rel="stylesheet" href="/main.min.244183cde1a38e0b08f82c11791181288f9aac1cc9618cd6f4e9e7710c5768ba.css" integrity="sha256-JEGDzeGjjgsI&#43;CwReRGBKI&#43;arBzJYYzW9OnncQxXaLo=" crossorigin="anonymous">





    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="">
    <link rel="shortcut icon" href="/favicon.ico">
    <meta name="msapplication-TileColor" content="">



  <meta itemprop="name" content="техническое руководство">
  <meta itemprop="description" content="“Создание игры «Spaxe invaders»” на c&#43;&#43; с нуля” Установка необходиимых билиотек
установка библиротек GLFW установка библиротек GLEW Начало работы
Подключение установленных библиотек #include #include &lt;GLFW/glfw3.h&gt;
Написание функций для вывода ошибок GLFW typedef void(*GLFWerrorfun)(int, const char *)
void error_callback(int error, const char* description)
{ fprintf(stderr, “Error: %s\n”, description); }
glfwSetErrorCallback(error_callback);
window = glfwCreateWindow(640, 480, “Space Invaders”, NULL, NULL);
if(!window)
{ glfwTerminate();
return -1;}
glfwMakeContextCurrent(window);
Инициализация GLEW GLenum err = glewInit();">
  <meta itemprop="wordCount" content="772">
  <meta itemprop="image" content="http://localhost:1313/">

  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:image" content="http://localhost:1313/">
  <meta name="twitter:title" content="техническое руководство">
  <meta name="twitter:description" content="“Создание игры «Spaxe invaders»” на c&#43;&#43; с нуля” Установка необходиимых билиотек
установка библиротек GLFW установка библиротек GLEW Начало работы
Подключение установленных библиотек #include #include &lt;GLFW/glfw3.h&gt;
Написание функций для вывода ошибок GLFW typedef void(*GLFWerrorfun)(int, const char *)
void error_callback(int error, const char* description)
{ fprintf(stderr, “Error: %s\n”, description); }
glfwSetErrorCallback(error_callback);
window = glfwCreateWindow(640, 480, “Space Invaders”, NULL, NULL);
if(!window)
{ glfwTerminate();
return -1;}
glfwMakeContextCurrent(window);
Инициализация GLEW GLenum err = glewInit();">



    <meta property="og:url" content="http://localhost:1313/%D1%82%D1%85/%D1%82%D0%B5%D1%85%D0%BD%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B5_%D1%80%D1%83%D0%BA%D0%BE%D0%B2%D0%BE%D0%B4%D1%81%D1%82%D0%B2%D0%BE/">
  <meta property="og:site_name" content="Практика">
  <meta property="og:title" content="техническое руководство">
  <meta property="og:description" content="“Создание игры «Spaxe invaders»” на c&#43;&#43; с нуля” Установка необходиимых билиотек
установка библиротек GLFW установка библиротек GLEW Начало работы
Подключение установленных библиотек #include #include &lt;GLFW/glfw3.h&gt;
Написание функций для вывода ошибок GLFW typedef void(*GLFWerrorfun)(int, const char *)
void error_callback(int error, const char* description)
{ fprintf(stderr, “Error: %s\n”, description); }
glfwSetErrorCallback(error_callback);
window = glfwCreateWindow(640, 480, “Space Invaders”, NULL, NULL);
if(!window)
{ glfwTerminate();
return -1;}
glfwMakeContextCurrent(window);
Инициализация GLEW GLenum err = glewInit();">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="тх">
    <meta property="og:image" content="http://localhost:1313/">

















    </head>

    
        <body>
    
    
        <div class="container">
            <header class="header">
    <span class="header__inner">
        <a href="/" style="text-decoration: none;">
    <div class="logo">
        
            <span class="logo__mark">></span>
            <span class="logo__text ">
                Практика</span>
            <span class="logo__cursor" style=
                  "
                   
                   ">
            </span>
        
    </div>
</a>


        <span class="header__right">
                <nav class="menu">
    <ul class="menu__inner"><li><a href="/%D0%B6%D1%83%D1%80%D0%BD%D0%B0%D0%BB">Журнал</a></li><li><a href="/page">О нас</a></li><li><a href="/%D1%80%D0%B5%D1%81%D1%83%D1%80%D1%81%D1%8B">Ресурсы</a></li><li><a href="/%d1%82%d1%85">Тех. руководство</a></li><li><a href="/%D1%83%D1%87%D0%B0%D1%81%D1%82%D0%BD%D0%B8%D0%BA%D0%B8">Участники</a></li><li><a href="/%D1%86%D0%B5%D0%BB%D0%B8-%D0%B8-%D0%B7%D0%B0%D0%B4%D0%B0%D1%87%D0%B8">Цели и задачи</a></li>
    </ul>
</nav>

                <span class="menu-trigger">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                        <path d="M0 0h24v24H0z" fill="none"/>
                        <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/>
                    </svg>
                </span>
        </span>
    </span>
</header>


            <div class="content">
                
    <main class="post">

        <div class="post-info">
            
            </p>
        </div>

        <article>
            <h2 class="post-title"><a href="http://localhost:1313/%D1%82%D1%85/%D1%82%D0%B5%D1%85%D0%BD%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B5_%D1%80%D1%83%D0%BA%D0%BE%D0%B2%D0%BE%D0%B4%D1%81%D1%82%D0%B2%D0%BE/">техническое руководство</a></h2>

            
            
            

            <div class="post-content">
                <h1 id="создание-игры-spaxe-invaders-на-c-с-нуля">“Создание игры «Spaxe invaders»” на c++ с нуля”</h1>
<p><strong>Установка необходиимых билиотек</strong></p>
<ul>
<li>установка библиротек GLFW</li>
<li>установка библиротек GLEW</li>
</ul>
<p><strong>Начало работы</strong></p>
<ul>
<li>Подключение установленных библиотек</li>
</ul>
<p>#include <!-- raw HTML omitted --></p>
<p>#include &lt;GLFW/glfw3.h&gt;</p>
<ul>
<li>Написание функций для вывода ошибок GLFW</li>
</ul>
<p>typedef void(*GLFWerrorfun)(int, const char *)</p>
<p>void error_callback(int error, const char* description)</p>
<p>{
fprintf(stderr, &ldquo;Error: %s\n&rdquo;, description);
}</p>
<p>glfwSetErrorCallback(error_callback);</p>
<p>window = glfwCreateWindow(640, 480, &ldquo;Space Invaders&rdquo;, NULL, NULL);</p>
<p>if(!window)</p>
<p>{
glfwTerminate();</p>
<pre><code>return -1;
</code></pre>
<p>}</p>
<p>glfwMakeContextCurrent(window);</p>
<ul>
<li>Инициализация GLEW</li>
</ul>
<p>GLenum err = glewInit();</p>
<p>if(err != GLEW_OK)</p>
<p>{
fprintf(stderr, &ldquo;Error initializing GLEW.\n&rdquo;);
glfwTerminate();
return -1;
}</p>
<p><strong>Создание игрового цикла</strong></p>
<p>glClearColor(1.0, 0.0, 0.0, 1.0);</p>
<p>while (!glfwWindowShouldClose(window))</p>
<p>{
glClear(GL_COLOR_BUFFER_BIT);</p>
<pre><code>glfwSwapBuffers(window);

glfwPollEvents();
</code></pre>
<p>}</p>
<p>glfwDestroyWindow(window);
glfwTerminate();</p>
<p><strong>Настройка рендера окна</strong></p>
<p>struct Buffer</p>
<p>{
size_t width, height;
uint32_t* data;
};</p>
<p>uint32_t rgb_to_uint32(uint8_t r, uint8_t g, uint8_t b)</p>
<p>{
return (r &laquo; 24) | (g &laquo; 16) | (b &laquo; 8) | 255;
}</p>
<p>void buffer_clear(Buffer* buffer, uint32_t color)</p>
<p>{
for(size_t i = 0; i &lt; buffer-&gt;width * buffer-&gt;height; ++i)</p>
<pre><code>{
    buffer-&gt;data[i] = color;
}
</code></pre>
<p>}</p>
<p>uint32_t clear_color = rgb_to_uint32(0, 128, 0);</p>
<p>Buffer buffer;</p>
<p>buffer.width  = buffer_width;</p>
<p>buffer.height = buffer_height;</p>
<p>buffer.data   = new uint32_t[buffer.width * buffer.height];</p>
<p>buffer_clear(&amp;buffer, clear_color);</p>
<p><strong>Настройка OenGL</strong></p>
<p>const char* vertex_shader =</p>
<pre><code>&quot;\n&quot;

&quot;#version 330\n&quot;

&quot;\n&quot;

&quot;noperspective out vec2 TexCoord;\n&quot;

&quot;\n&quot;

&quot;void main(void){\n&quot;

&quot;\n&quot;

&quot;    TexCoord.x = (gl_VertexID == 2)? 2.0: 0.0;\n&quot;

&quot;    TexCoord.y = (gl_VertexID == 1)? 2.0: 0.0;\n&quot;

&quot;    \n&quot;

&quot;    gl_Position = vec4(2.0 * TexCoord - 1.0, 0.0, 1.0);\n&quot;

&quot;}\n&quot;;
</code></pre>
<p>GLuint shader_id = glCreateProgram();</p>
<p>{
GLuint shader_vp = glCreateShader(GL_VERTEX_SHADER);</p>
<pre><code>glShaderSource(shader_vp, 1, &amp;vertex_shader, 0);

glCompileShader(shader_vp);

validate_shader(shader_vp, vertex_shader);

glAttachShader(shader_id, shader_vp);

glDeleteShader(shader_vp);
</code></pre>
<p>}</p>
<p>{
GLuint shader_fp = glCreateShader(GL_FRAGMENT_SHADER);</p>
<pre><code>glShaderSource(shader_fp, 1, &amp;fragment_shader, 0);

glCompileShader(shader_fp);

validate_shader(shader_fp, fragment_shader);

glAttachShader(shader_id, shader_fp);

glDeleteShader(shader_fp);
</code></pre>
<p>}</p>
<p>glLinkProgram(shader_id);</p>
<p>if(!validate_program(shader_id))
{
fprintf(stderr, &ldquo;Error while validating shader.\n&rdquo;);</p>
<pre><code>glfwTerminate();

glDeleteVertexArrays(1, &amp;fullscreen_triangle_vao);

delete[] buffer.data;

return -1;
</code></pre>
<p>}</p>
<p><strong>создание противника для игры и его рендер</strong></p>
<p>Sprite alien_sprite;</p>
<p>alien_sprite.width = 11;</p>
<p>alien_sprite.height = 8;</p>
<p>alien_sprite.data = new uint8_t[11 * 8]</p>
<p>{
0,0,1,0,0,0,0,0,1,0,0, // ..@&hellip;..@..</p>
<pre><code>0,0,0,1,0,0,0,1,0,0,0, // ...@...@...

0,0,1,1,1,1,1,1,1,0,0, // ..@@@@@@@..

0,1,1,0,1,1,1,0,1,1,0, // .@@.@@@.@@.

1,1,1,1,1,1,1,1,1,1,1, // @@@@@@@@@@@

1,0,1,1,1,1,1,1,1,0,1, // @.@@@@@@@.@

1,0,1,0,0,0,0,0,1,0,1, // @.@.....@.@

0,0,0,1,1,0,1,1,0,0,0  // ...@@.@@...
</code></pre>
<p>};</p>
<p>buffer_sprite_draw(&amp;buffer, alien_sprite,</p>
<pre><code>112, 128, rgb_to_uint32(128, 0, 0));
</code></pre>
<p>glTexSubImage2D(</p>
<pre><code>GL_TEXTURE_2D, 0, 0, 0,

buffer.width, buffer.height,

GL_RGBA, GL_UNSIGNED_INT_8_8_8_8,

buffer.data
</code></pre>
<p>);</p>
<p><strong>добавление игрока и движения противников</strong></p>
<p>struct Alien</p>
<p>{
size_t x, y;</p>
<pre><code>uint8_t type;
</code></pre>
<p>};</p>
<p>struct Player</p>
<p>{
size_t x, y;</p>
<pre><code>size_t life;
</code></pre>
<p>};</p>
<p>struct Game</p>
<p>{
size_t width, height;</p>
<pre><code>size_t num_aliens;

Alien* aliens;

Player player;
</code></pre>
<p>};</p>
<p>Sprite player_sprite;</p>
<p>player_sprite.width = 11;</p>
<p>player_sprite.height = 7;</p>
<p>player_sprite.data = new uint8_t[77]</p>
<p>{
0,0,0,0,0,1,0,0,0,0,0, // &hellip;..@&hellip;..</p>
<pre><code>0,0,0,0,1,1,1,0,0,0,0, // ....@@@....

0,0,0,0,1,1,1,0,0,0,0, // ....@@@....

0,1,1,1,1,1,1,1,1,1,0, // .@@@@@@@@@.

1,1,1,1,1,1,1,1,1,1,1, // @@@@@@@@@@@

1,1,1,1,1,1,1,1,1,1,1, // @@@@@@@@@@@

1,1,1,1,1,1,1,1,1,1,1, // @@@@@@@@@@@
</code></pre>
<p>};</p>
<p><strong>инициализация игровго процесса</strong></p>
<p>Game game;</p>
<p>game.width = buffer_width;</p>
<p>game.height = buffer_height;</p>
<p>game.num_aliens = 55;</p>
<p>game.aliens = new Alien[game.num_aliens];</p>
<p>game.player.x = 112 - 5;</p>
<p>game.player.y = 32;</p>
<p>game.player.life = 3;</p>
<p>for(size_t ai = 0; ai &lt; game.num_aliens; ++ai)</p>
<p>{
const Alien&amp; alien = game.aliens[ai];</p>
<pre><code>buffer_draw_sprite(&amp;buffer, alien_sprite,

    alien.x, alien.y, rgb_to_uint32(128, 0, 0));
</code></pre>
<p>}</p>
<p>buffer_draw_sprite(&amp;buffer, player_sprite, game.player.x, game.player.y, rgb_to_uint32(128, 0, 0));</p>
<p><strong>создание анимации из двух кадров для противника</strong></p>
<p>struct SpriteAnimation
{
bool loop;</p>
<pre><code>size_t num_frames;

size_t frame_duration;

size_t time;

Sprite** frames;
</code></pre>
<p>};</p>
<p>Sprite alien_sprite1;</p>
<p>alien_sprite1.width = 11;</p>
<p>alien_sprite1.height = 8;</p>
<p>alien_sprite1.data = new uint8_t[88]</p>
<p>{
0,0,1,0,0,0,0,0,1,0,0, // ..@&hellip;..@..</p>
<pre><code>1,0,0,1,0,0,0,1,0,0,1, // @..@...@..@

1,0,1,1,1,1,1,1,1,0,1, // @.@@@@@@@.@

1,1,1,0,1,1,1,0,1,1,1, // @@@.@@@.@@@

1,1,1,1,1,1,1,1,1,1,1, // @@@@@@@@@@@

0,1,1,1,1,1,1,1,1,1,0, // .@@@@@@@@@.

0,0,1,0,0,0,0,0,1,0,0, // ..@.....@..

0,1,0,0,0,0,0,0,0,1,0  // .@.......@.
</code></pre>
<p>};</p>
<p>SpriteAnimation* alien_animation = new SpriteAnimation;</p>
<p>alien_animation-&gt;loop = true;</p>
<p>alien_animation-&gt;num_frames = 2;</p>
<p>alien_animation-&gt;frame_duration = 10;</p>
<p>alien_animation-&gt;time = 0;</p>
<p>alien_animation-&gt;frames = new Sprite*[2];</p>
<p>alien_animation-&gt;frames[0] = &amp;alien_sprite0;</p>
<p>alien_animation-&gt;frames[1] = &amp;alien_sprite1;</p>
<p><strong>создание скрипта для перемещения игрока</strong></p>
<p>int player_move_dir = 1;</p>
<p>if(game.player.x + player_sprite.width + player_move_dir &gt;= game.width - 1)</p>
<p>{
game.player.x = game.width - player_sprite.width - player_move_dir - 1;
player_move_dir *= -1;
}</p>
<p>else if((int)game.player.x + player_move_dir &lt;= 0)</p>
<p>{
game.player.x = 0;
player_move_dir *= -1;
}</p>
<p>else game.player.x += player_move_dir;</p>
<p>int move_dir = 0;</p>
<p>case GLFW_KEY_RIGHT:</p>
<pre><code>if(action == GLFW_PRESS) move_dir += 1;

else if(action == GLFW_RELEASE) move_dir -= 1;

break;
</code></pre>
<p>case GLFW_KEY_LEFT:</p>
<pre><code>if(action == GLFW_PRESS) move_dir -= 1;

else if(action == GLFW_RELEASE) move_dir += 1;

break;
</code></pre>
<p>int player_move_dir = 2 * move_dir;</p>
<p>if(player_move_dir != 0)</p>
<p>{
if(game.player.x + player_sprite.width + player_move_dir &gt;= game.width)</p>
<pre><code>{
    game.player.x = game.width - player_sprite.width;
}

else if((int)game.player.x + player_move_dir &lt;= 0)

{
    game.player.x = 0;
}

else game.player.x += player_move_dir;
</code></pre>
<p>}</p>
<p><strong>добавление снарядов</strong></p>
<p>bool fire_pressed = 0;</p>
<p>case GLFW_KEY_SPACE:</p>
<pre><code>if(action == GLFW_RELEASE) fire_pressed = true;
break;
</code></pre>
<p>struct Bullet</p>
<p>{
size_t x, y;</p>
<pre><code>int dir;
</code></pre>
<p>};</p>
<p>struct Game
{
size_t width, height;</p>
<pre><code>size_t num_aliens;

size_t num_bullets;

Alien* aliens;

Player player;

Bullet bullets[GAME_MAX_BULLETS];
</code></pre>
<p>};</p>
<p>Sprite bullet_sprite;</p>
<p>bullet_sprite.width = 1;</p>
<p>bullet_sprite.height = 3;</p>
<p>bullet_sprite.data = new uint8_t[3]</p>
<p>{
1, // @
1, // @
1  // @
};</p>
<p>if(fire_pressed &amp;&amp; game.num_bullets &lt; GAME_MAX_BULLETS)</p>
<p>{
game.bullets[game.num_bullets].x = game.player.x + player_sprite.width / 2;</p>
<pre><code>game.bullets[game.num_bullets].y = game.player.y + player_sprite.height;

game.bullets[game.num_bullets].dir = 2;

++game.num_bullets;
</code></pre>
<p>}</p>
<p>fire_pressed = false;</p>

            </div>
        </article>

        <hr />

        <div class="post-info">
            
                
    
  		</div>
    </main>

            </div>

            
                <footer class="footer">
    
    
</footer>

            
        </div>

        



<script type="text/javascript" src="/bundle.min.e89fda0f29b95d33f6f4224dd9e5cf69d84aff3818be2b0d73e731689cc374261b016d17d46f8381962fb4a1577ba3017b1f23509d894f6e66431f988c00889e.js" integrity="sha512-6J/aDym5XTP29CJN2eXPadhK/zgYvisNc&#43;cxaJzDdCYbAW0X1G&#43;DgZYvtKFXe6MBex8jUJ2JT25mQx&#43;YjACIng=="></script>




    </body>
</html>
